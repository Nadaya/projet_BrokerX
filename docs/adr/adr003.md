### ADR-003 -- Gestion des erreurs et idempotence des opérations
#### Statut
Accepté 
#### Contexte 
Certaines opérations comme un dépôt d’argent doivent être fiables : on ne veut pas créditer deux fois le portefeuille si un client relance la requête ou si le réseau coupe en plein milieu.
Il faut aussi que les erreurs soient claires, pour le client comme pour l’équipe technique, et qu’on puisse faire évoluer l’API sans tout casser.

#### Décision
Chaque requête critique (comme un dépôt) doit contenir une clé d’idempotence (client_request_id). Cela permet d’ignorer les doublons si la requête est rejouée.

#### Conséquences
- un client peut renvoyer la même requête plusieurs fois sans risque de double crédit,
- les erreurs sont plus faciles à comprendre et à tracer dans les logs.